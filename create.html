<!DOCTYPE html>
<html lang="en">
<head>
    <title>Guess The Clue</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="keywords" content="cryptic, crossword, clues"/>
    <meta name="description" content="Guess The Clue!"/>
    <meta property="og:title" content="Guess The Clue"/>
    <meta property="og:site_name" content="Guess The Clue"/>
    <link rel="stylesheet" href="./index.css"/>
    <style>
        .gtc_main__create {
            grid-template:
                "title" 15%
                "maker" auto
                "copy" auto
                "keyboard" env(keyboard-inset-height, 0px);

            #title {
                grid-row: 1;
            }

            #maker {
                display: inline-grid;
                grid-row: 2;
                row-gap: 1em;
                padding: 2em 0;

                input[name="answer"] {
                    text-transform: uppercase;
                }

                .gtc_input {
                    border: none;
                }
            }

            .gtc_button--copy {
                grid-row: 3;
            }

            .gtc_input--clue, .gtc_input--hint {
                height: 4em;
            }

            label {
                text-align: left;
            }

            #maker:invalid + * > .gtc_button {
                pointer-events: none;
                background: var(--colour-grey);
                cursor: not-allowed;
            }
        }

        .gtc_button_list {
            display: flex;
            justify-content: space-evenly;
        }
    </style>
</head>
<body>
<main class="gtc_main gtc_main__create">
    <h1 class="gtc_header" id="title">Create your own!</h1>
    <form id="maker">
        <label class="gtc_header" for="clue">Clue</label>
        <textarea class="gtc_input gtc_input--clue" id="clue" name="clue" placeholder="Slam nonsense tales" required minlength="1" rows="4"></textarea>
        <label class="gtc_header" for="answer">Answer</label>
        <input class="gtc_input" id="answer" name="answer" placeholder="SLATE" required minlength="1" maxlength="15">
        <label class="gtc_header" for="hint">Hint (Optional)</label>
        <textarea class="gtc_input gtc_input--hint" id="hint" name="hint" placeholder="'Nonsense' indicates an anagram of nearby letters"></textarea>
    </form>
    <div class="gtc_button_list">
        <button class="gtc_button gtc_button--copy" id="copy">Copy to clipboard</button>
        <button class="gtc_button gtc_button--copy" id="open">Open in new tab</button>
    </div>
    <script>
        document.getElementById('copy').onclick = (e) => {
            let format = [...document.getElementById('maker').querySelectorAll('.gtc_input')]
                .map((e) => e.value)
                .join("|");

            navigator.clipboard.writeText(`${window.location.origin}${window.location.pathname.replace("create","index")}#${btoa(format)}`);
        }

        document.getElementById('open').onclick = (_) => {
            let format = [...document.getElementById('maker').querySelectorAll('.gtc_input')]
                .map((e) => e.value)
                .join("|");

            let url = `${window.location.origin}${window.location.pathname.replace("create","index")}#${btoa(format)}`;

            window.open(url).focus()
        }
    </script>
</main>
</body>
</html>